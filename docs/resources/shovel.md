---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "rabbitmq_shovel Resource - terraform-provider-rabbitmq"
subcategory: ""
description: |-
  The rabbitmq_shovel resource creates and manages a dynamic shovel.
---

# rabbitmq_shovel (Resource)

The `rabbitmq_shovel` resource creates and manages a dynamic shovel.

## Example Usage

```terraform
# Create a virtual host
resource "rabbitmq_vhost" "example" {
    name = "myvhost"
}

# Create an exchange
resource "rabbitmq_exchange" "example" {
    name = "myexchange"
    vhost = rabbitmq_vhost.example.name
    settings {
        type = "fanout"
        durable = false
        auto_delete = true
    }
}

# Create a queue
resource "rabbitmq_queue" "example" {
	name = "myqueue"
	vhost = rabbitmq_vhost.example.name
	settings {
		durable = false
		auto_delete = true
	}
}

# Create a shovel
resource "rabbitmq_shovel" "example" {
	name = "myshovel"
	vhost = rabbitmq_vhost.example.name
	info {
		source_uri = "amqp:///example"
		source_exchange = rabbitmq_exchange.example.name
		source_exchange_key = "example"
		destination_uri = "amqp:///example"
		destination_queue = rabbitmq_queue.example.name
		destination_queue_arguments = {
			x-queue-type = "classic"
		}
	}
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `info` (Block List, Min: 1, Max: 1) The settings of the dynamic shovel. The structure is described below. (see [below for nested schema](#nestedblock--info))
- `name` (String) The shovel name.
- `vhost` (String) The vhost to create the resource in.

### Read-Only

- `id` (String) The ID of this resource.

<a id="nestedblock--info"></a>
### Nested Schema for `info`

Required:

- `destination_uri` (String) The amqp uri for the destination.
- `source_uri` (String) The amqp uri for the source.

Optional:

- `ack_mode` (String) Determines how the shovel should acknowledge messages. Possible values are `on-confirm`, `on-publish` and `no-ack`. Defaults to `on-confirm`.
- `add_forward_headers` (Boolean, Deprecated) Whether to add `x-shovelled` headers to shovelled messages.
-> **Note:** Use `destination_add_forward_headers` instead.
- `delete_after` (String, Deprecated) Determines when (if ever) the shovel should delete itself. Possible values are `never`, `queue-length` or an integer.
-> **Note:** Use `source_delete_after` instead.
- `destination_add_forward_headers` (Boolean) Whether to add _x-shovelled_ headers to shovelled messages.
- `destination_add_timestamp_header` (Boolean) Whether to add _x-shovelled-timestamp_ headers to shovelled messages. Defaults to `false`.
- `destination_address` (String) **AMQP 1.0 specific parameter**: Destination link address.
- `destination_application_properties` (Map of String) **AMQP 1.0 specific parameter**: A map of application properties to set when shovelling messages
- `destination_exchange` (String) The exchange to which messages should be published.
~> **Note:** Either this or `destination_queue` must be specified but not both.
- `destination_exchange_key` (String) The routing key when using `destination_exchange`.
- `destination_properties` (Map of String) **AMQP 1.0 specific parameter**: A map of properties to overwrite when shovelling messages.
- `destination_protocol` (String) The protocol to use when connecting to the destination. Possible values are `amqp091` or `amqp10`. Defaults to `amqp091`.
- `destination_publish_properties` (Map of String) A map of properties to overwrite when shovelling messages.
- `destination_queue` (String) The queue to which messages should be published.
~> **Note:** Either this or `destination_exchange` must be specified but not both.
- `destination_queue_arguments` (Map of String) A map of agurments to add into the queue.
- `prefetch_count` (Number, Deprecated) The maximum number of unacknowledged messages copied over a shovel at any one time.
-> **Note:** Use `source_prefetch_count` instead.
- `reconnect_delay` (Number) The duration in seconds to reconnect to a broker after disconnected. Defaults to `1`.
- `source_address` (String) **AMQP 1.0 specific parameter**: Source link address.
- `source_delete_after` (String) Determines when (if ever) the shovel should delete itself. Possible values are `never`, `queue-length` or an integer.
- `source_exchange` (String) The exchange from which to consume.
~> **Note:** Either this or `source_queue` must be specified but not both.
- `source_exchange_key` (String) The routing key when using `source_exchange`.
- `source_prefetch_count` (Number) The maximum number of unacknowledged messages copied over a shovel at any one time.
- `source_protocol` (String) The protocol to use when connecting to the source. Possible values are `amqp091` or `amqp10`. Defaults to `amqp091`.
- `source_queue` (String) The queue from which to consume.
~> **Note:** Either this or `source_exchange` must be specified but not both.
