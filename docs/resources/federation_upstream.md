---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "rabbitmq_federation_upstream Resource - terraform-provider-rabbitmq"
subcategory: "Federation Upstream"
description: |-
  The rabbitmq_federation_upstream resource creates and manages a federation upstream parameter.
---

# rabbitmq_federation_upstream (Resource)

The `rabbitmq_federation_upstream` resource creates and manages a federation upstream parameter.

## Example Usage

```terraform
# Create a vhost
resource "rabbitmq_vhost" "example" {
  name = "myvhost"
}

// Create federation upstream
resource "rabbitmq_federation_upstream" "example" {
  name = "myfederationupstream"
  vhost = rabbitmq_vhost.example.vhost

  definition {
    uri = "amqp://guest:guest@upstream-server-name:5672/%2f"
    prefetch_count = 1000
    reconnect_delay = 5
    ack_mode = "on-confirm"
    trust_user_id = false
    max_hops = 1
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `definition` (Block List, Min: 1, Max: 1) The configuration of the federation upstream. The structure is described below. (see [below for nested schema](#nestedblock--definition))
- `name` (String) The name of the federation upstream.
- `vhost` (String) The vhost to create the resource in.

### Read-Only

- `component` (String) Set to _federation-upstream_ by the underlying RabbitMQ provider. You do not set this attribute but will see it in state and plan output.
- `id` (String) The ID of this resource.

<a id="nestedblock--definition"></a>
### Nested Schema for `definition`

Required:

- `uri` (String, Sensitive) The AMQP Uri for the upstream.
~> **Note:** The Uri may contain sensitive information, such as a password.

Optional:

- `ack_mode` (String) Determines how the link should acknowledge messages. Possible values are `on-confirm`, `on-publish` and `no-ack`. Defaults to `on-confirm`.
- `exchange` (String) **Federated Exchanges Only**: The name of the upstream exchange.
- `expires` (Number) **Federated Exchanges Only**: The expiry time (in milliseconds) after which an upstream queue for a federated exchange may be deleted if a connection to the upstream is lost.
- `max_hops` (Number) **Federated Exchanges Only**: Maximum number of federation links that messages can traverse before being dropped. Defaults to `1`.
- `message_ttl` (Number) **Federated Exchanges Only**: The expiry time (in milliseconds) for messages in the upstream queue for a federated exchange (see `expires`).
- `prefetch_count` (Number) Maximum number of unacknowledged messages that may be in flight over a federation link at one time. Defaults to `1000`.
- `queue` (String) **Federated Queues Only**: The name of the upstream queue.
- `reconnect_delay` (Number) Time in seconds to wait after a network link goes down before attempting reconnection. Defaults to `5`.
- `trust_user_id` (Boolean) Determines how federation should interact with the validated user-id feature. Default is `false`.
